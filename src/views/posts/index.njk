{% extends "layout.njk" %} {% block content %}
<div class="container">
  <h1 class="mb-4">Blog Posts</h1>

  {% if posts.length === 0 %}
  <div class="alert alert-info">No blog posts available yet.</div>
  {% else %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for post in posts %}
    <div class="col">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">
            <a href="/posts/{{ post.slug }}" class="text-decoration-none">{{
              post.title
            }}</a>
          </h5>
          <p class="card-text text-muted small">
            <i class="bi bi-person"></i> {{ post.author }} |
            <i class="bi bi-calendar"></i>
            {{ post.createdAt | date('MMMM D, YYYY') }}
          </p>
          <p class="card-text">{{ post.excerpt }}</p>
        </div>
        <div class="card-footer bg-transparent">
          <a href="/posts/{{ post.slug }}" class="btn btn-sm btn-primary"
            >Read more â†’</a
          >
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Pagination -->
  {% if totalPages > 1 %}
  <nav aria-label="Blog posts pagination" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item {% if not hasPrevious %}disabled{% endif %}">
        <a
          class="page-link"
          href="/posts?page={{ currentPage - 1 }}"
          {%
          if
          not
          hasPrevious
          %}tabindex="-1"
          {%
          endif
          %}
        >
          Previous
        </a>
      </li>

      {% for pageNum in range(1, totalPages + 1) %}
      <li class="page-item {% if pageNum === currentPage %}active{% endif %}">
        <a class="page-link" href="/posts?page={{ pageNum }}">{{ pageNum }}</a>
      </li>
      {% endfor %}

      <li class="page-item {% if not hasNext %}disabled{% endif %}">
        <a
          class="page-link"
          href="/posts?page={{ currentPage + 1 }}"
          {%
          if
          not
          hasNext
          %}tabindex="-1"
          {%
          endif
          %}
        >
          Next
        </a>
      </li>
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
